# minecraft-server-logs

> Library for parsing and streaming Minecraft logs

## Install

Install with [npm](https://www.npmjs.com/)

```sh
$ npm i minecraft-server-logs --save
```

or

```sh
$ yarn add minecraft-server-logs
```

## Usage

```js
const { createLoggedMessage } = require('minecraft-server-logs');

const message = createLoggedMessage(
  '[00:00:00] [Dummy thread/INFO]: Hello world!'
);

console.dir(message);
// outputs: { timestamp: '00:00:00', thread: 'Dummy thread', level: 'INFO', message: 'Hello world!'}
```

```ts
import { createLoggedMessage } = from 'minecraft-server-logs';

const message = createLoggedMessage('[00:00:00] [Dummy thread/INFO]: Hello world!');
console.dir(message);
// outputs: { timestamp: '00:00:00', thread: 'Dummy thread', level: 'INFO', message: 'Hello world!'}

const event = createLoggedEvent(message);
console.dir(event);
// outputs: {
//    timestamp: '00:00:00',
//    thread: 'Dummy thread',
//    level: 'INFO',
//    message: 'Dummy joined the game',
//    eventName: 'playerJoined',
//    playerName: 'Dummy'
// }
```

```ts
import { streamLoggedLines, streamLoggedMessages } from 'minecraft-server-logs';

import { appendFileSync } from 'fs';
import { join } from 'path';

const logsFile = join(process.cwd(), 'logs', 'latest.log');

const messages$ = streamLoggedMessages(
  streamLoggedLines(logsFile, {
    fromBeginning: true,
  })
);

messages$.subscribe((v) => console.log(`${v.timestamp}: ${v.message}`));

appendFileSync(logsFile, '[00:00:00] [Dummy thread/INFO]: Hello world!\n');

// outputs: 00:00:00: Hello world!
```

```ts
import { streamLoggedEvents } from 'minecraft-server-logs';
import { filter, map } from 'rxjs';

const events$ = streamLoggedEvents('./logs/latest.log');

const playerJoined$ = events$.pipe(
  filter((v) => v.eventName === 'playerJoined'),
  map((v) => v as LoggedEvent<PlayerJoinedEvent>)
);
```

```ts
import {
  HasEventName,
  LoggedEvent,
  PlayerJoinedEvent,
  PlayerLeftEvent,
} from 'minecraft-server-logs';

import { filter, map } from 'rxjs';

const filterPresenceEvents = filter(
  ({ eventName }: HasEventName) =>
    eventName === 'playerJoined' || eventName === 'playerLeft'
);

const mapToPresenceEvent = map(
  (v: LoggedEvent) => v as LoggedEvent<PlayerJoinedEvent | PlayerLeftEvent>
);

const presence$ = events$.pipe(filterPresenceEvents, mapToPresenceEvent);

presence$.subscribe(({ eventName, timestamp, playerName }) => {
  console.log(`[${timestamp}] ${eventName}(${playerName})`);
});
```

## Running tests

Install dev dependencies:

```sh
$ npm i -d && npm test
```

## Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](https://github.com/lordsequoia/minecraft-server-logs/issues)

## Author

**LordSequoia**

- [github/](https://github.com/)
- [twitter/](http://twitter.com/)

## License

Copyright Â© 2022 [LordSequoia](https://github.com/lordsequoia)
Licensed under the MIT license.

---

_This file was generated by [readme-generator](https://github.com/jonschlinkert/readme-generator) on July 06, 2022._
